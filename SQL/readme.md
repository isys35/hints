<h1>SQL</h1>

<h2>SELECT</h2>


Оператор SELECT осуществляет выборку из базы данных


Пример выборки всех данных:

```sql
    SELECT * FROM PC;
```

Пример выборки определённых полей в определённом порядке данных:

```sql
    SELECT price, speed, hd
    FROM PC;
```


<h2>DISTINCT</h2>

Выводит уникальные строки

```sql
    SELECT DISTINCT speed, ram 
    FROM PC;
```



<h2>Предикаты</h2>

Предикаты представляют собой выражения, 
принимающие истинностное значение. 
Они могут представлять собой как одно выражение,
так и любую комбинацию из неограниченного количества выражений, 
построенную с помощью булевых операторов AND, OR или NOT. 
Кроме того, в этих комбинациях может использоваться SQL-оператор 
IS, а также круглые скобки для конкретизации.


<h2>JOIN</h2>

Объединяет таблицы.

Как оформляется:

```sql
    FROM <таблица 1>
     [INNER]
     {{LEFT | RIGHT | FULL } [OUTER]} JOIN <таблица 2>
    [ON <предикат>]
```



<h2>UNION</h2>

Объединяет запросы.


```sql
    <запрос 1>
    UNION [ALL]
    <запрос 2>
```


<h2>INTERSECT и EXCEPT</h2>

Пересечение и разность

Пример: Найти корабли, которые присутствуют как в таблице Ships,
так и в таблице Outcomes. 

```sql
    SELECT name FROM Ships
    INTERSECT
    SELECT ship FROM Outcomes;
```

Пример: Найти корабли из таблицы Outcomes,
которые отсутствуют в таблице Ships. 

```sql
    SELECT ship FROM Outcomes
    EXCEPT
    SELECT name FROM Ships;
```


<h2>IN</h2>

Предикат IN определяет, будет ли значение проверяемого выражения обнаружено в наборе значений, который либо явно 
либо получен с помощью табличного подзапроса.


```sql
    IN::=
     <Проверяемое выражение> [NOT] IN (<подзапрос>)
     | (<выражение для вычисления значения>,...)
```

Пример: Найти модель, частоту процессора и объем жесткого диска компьютеров, которые комплектуются накопителями 10 Гбайт
или 20 Гбайт и выпускаются производителем А:

```sql
    SELECT model, speed, hd
    FROM PC 
    WHERE hd IN (10, 20) AND 
     model IN (SELECT model 
     FROM product 
     WHERE maker = 'A'
     );
```


<h2>Подзапросы</h2>

Пример: Найти модели и цены ПК, стоимость которых превышает минимальную стоимость портативных компьютеров:


```sql
    SELECT DISTINCT model, price
    FROM PC
    WHERE price > (SELECT MIN(price) 
     FROM Laptop
     );
```


<h2>Агрегатные функции</h2>


Агрегатные функции:
    <ul>
        <li>`COUNT(*)` - Возвращает количество строк источника записей</li>
        <li>`COUNT` - Возвращает количество значений в указанном столбце</li>
        <li>`SUM` -  Возвращает сумму значений в указанном столбце</li>
        <li>`AVG` -  Возвращает среднее значение в указанном столбце</li>
        <li>`MIN` -  Возвращает минимальное значение в указанном столбце</li>
        <li>`MAX` -  Возвращает максимальное значение в указанном столбце</li>
    </ul>


Пример: Найти минимальную и максимальную цену на персональные компьютеры:

```sql
    SELECT MIN(price) AS Min_price, 
        MAX(price) AS Max_price
    FROM PC;
```


<h2>GROUP BY</h2>
Предложение GROUP BY используется для определения групп выходных строк, к которым могут применяться агрегатные функции (COUNT, MIN, MAX, AVG и SUM).



<h2>HAVING</h2>
<b>HAVING</b> - применяется после группировки для определения аналогичного предиката, фильтрующего группы по значениям агрегатных функций

Пример: Получить количество ПК и среднюю цену для каждой модели, средняя цена которой менее $800 


```sql
    SELECT model, COUNT(model) AS Qty_model, 
       AVG(price) AS Avg_price
    FROM PC
    GROUP BY model
    HAVING AVG(price) < 800;
```


<h2>Использование в запросе нескольких источников записей</h2>

Пример: Вывести пары моделей, имеющих одинаковые цены:

```sql
    SELECT DISTINCT A.model AS model_1, B.model AS model_2
    FROM PC AS A, PC B
    WHERE A.price = B.price AND 
     A.model < B.model;
```